{"version":3,"sources":["../../../lib/routes/lcbo.js"],"names":["Object","defineProperty","exports","value","_express","require","_express2","_interopRequireDefault","_axios","_axios2","_lcboParser","_lcboParser2","obj","__esModule","default","router","Router","lcboInvUrl","get","req","res","console","log","send","partNumber","parseInt","params","brand","lcboInvParams","headers","then","resp","data","parsed","parseInventory","catch","err"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;;AAIA,IAAIC,WAAWC,QAAQ,SAAR,CAAf;;AAEA,IAAIC,YAAYC,uBAAuBH,QAAvB,CAAhB;;AAEA,IAAII,SAASH,QAAQ,OAAR,CAAb;;AAEA,IAAII,UAAUF,uBAAuBC,MAAvB,CAAd;;AAEA,IAAIE,cAAcL,QAAQ,qBAAR,CAAlB;;AAEA,IAAIM,eAAeJ,uBAAuBG,WAAvB,CAAnB;;AAEA,SAASH,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,IAAIG,SAAST,UAAUQ,OAAV,CAAkBE,MAAlB,EAAb;;AAEA,IAAIC,aAAa,yEAAjB;;AAEAF,OAAOG,GAAP,CAAW,SAAX,EAAsB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACtCC,YAAQC,GAAR,CAAY,2BAAZ;AACAF,QAAIG,IAAJ,CAAS,UAAT;AACH,CAHD;;AAKAR,OAAOG,GAAP,CAAW,aAAX,EAA0B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC1CC,YAAQC,GAAR,CAAY,2BAAZ;AACA,QAAIE,aAAaC,SAASN,IAAIO,MAAJ,CAAWC,KAApB,CAAjB;AACA,QAAIC,gBAAgB;AAChB,qBAAa,KADG;AAEhB,kBAAU,CAAC,CAFK;AAGhB,sBAAcJ,UAHE;AAIhB,mBAAW;AAJK,KAApB;AAMAf,YAAQK,OAAR,CAAgBI,GAAhB,CAAoBD,UAApB,EAAgC;AAC5BS,gBAAQE,aADoB;AAE5BC,iBAAS;AACL,6BAAiB,UADZ;AAEL,yCAA6B,GAFxB;AAGL,mBAAO,GAHF;AAIL,oBAAQ;AAJH;AAFmB,KAAhC,EAQGC,IARH,CAQQ,UAAUC,IAAV,EAAgB;AACpB,YAAIpB,aAAaG,OAAjB,CAAyBiB,KAAKC,IAA9B,EAAoC,UAAUC,MAAV,EAAkB;AAClDb,gBAAIG,IAAJ,CAASU,MAAT;AACH,SAFD,EAEGC,cAFH;AAGH,KAZD,EAYGC,KAZH,CAYS,UAAUC,GAAV,EAAe;AACpBhB,YAAIG,IAAJ,CAASa,GAAT;AACH,KAdD;AAeH,CAxBD;;AA0BAlC,QAAQY,OAAR,GAAkBC,MAAlB","file":"lcbo.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _lcboParser = require('../utils/lcboParser');\n\nvar _lcboParser2 = _interopRequireDefault(_lcboParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = _express2.default.Router();\n\nvar lcboInvUrl = 'http://www.lcbo.com/webapp/wcs/stores/servlet/ProductStoreInventoryView';\n\nrouter.get('/stores', function (req, res) {\n    console.log(\"Requested Stores Resource\");\n    res.send(\"RESPONSE\");\n});\n\nrouter.get('/inv/:brand', function (req, res) {\n    console.log(\"Requested Brand Inventory\");\n    var partNumber = parseInt(req.params.brand);\n    var lcboInvParams = {\n        \"catalogId\": 10001,\n        \"langId\": -1,\n        \"partNumber\": partNumber,\n        \"storeId\": 10151\n    };\n    _axios2.default.get(lcboInvUrl, {\n        params: lcboInvParams,\n        headers: {\n            \"cache-control\": \"no-cache\",\n            \"upgrade-insecure-requests\": \"1\",\n            \"dnt\": \"1\",\n            \"host\": \"www.lcbo.com\"\n        }\n    }).then(function (resp) {\n        new _lcboParser2.default(resp.data, function (parsed) {\n            res.send(parsed);\n        }).parseInventory();\n    }).catch(function (err) {\n        res.send(err);\n    });\n});\n\nexports.default = router;"]}