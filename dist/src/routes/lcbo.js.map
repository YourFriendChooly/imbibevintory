{"version":3,"sources":["../../../src/routes/lcbo.js"],"names":["router","Router","lcboInvUrl","get","req","res","console","log","partNumber","parseInt","params","brand","query","lcboInvParams","headers","then","resp","data","parsed","send","parseInventory","catch","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA,IAAMC,aAAa,yEAAnB;;AAEAF,OAAOG,GAAP,CAAW,aAAX,EAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpCC,YAAQC,GAAR,CAAY,2BAAZ;AACA,QAAIC,aAAaC,SAASL,IAAIM,MAAJ,CAAWC,KAApB,CAAjB;AACA,QAAID,SAASN,IAAIQ,KAAjB;AACA,QAAIC,gBAAgB;AAChB,qBAAa,KADG;AAEhB,kBAAU,CAAC,CAFK;AAGhB,sBAAcL,UAHE;AAIhB,mBAAW;AAJK,KAApB;AAMA,oBAAML,GAAN,CAAUD,UAAV,EAAsB;AAClBQ,gBAAQG,aADU;AAElBC,iBAAS;AACL,6BAAiB,UADZ;AAEL,yCAA6B,GAFxB;AAGL,mBAAO,GAHF;AAIL,oBAAQ;AAJH;AAFS,KAAtB,EAQGC,IARH,CAQQ,UAACC,IAAD,EAAU;AACd,iCAAeA,KAAKC,IAApB,EAA0BP,MAA1B,EAAkC,UAACQ,MAAD,EAAY;AAC1Cb,gBAAIc,IAAJ,CAASD,MAAT;AACH,SAFD,EAEGE,cAFH;AAGH,KAZD,EAYGC,KAZH,CAYS,UAACC,GAAD,EAAS;AACdjB,YAAIc,IAAJ,CAASG,GAAT;AACH,KAdD;AAeH,CAzBD;;kBA2BetB,M","file":"lcbo.js","sourcesContent":["import express from 'express'\nimport axios from 'axios';\nimport LcboParser from '../utils/lcboParser'\n\nconst router = express.Router();\n\nconst lcboInvUrl = 'http://www.lcbo.com/webapp/wcs/stores/servlet/ProductStoreInventoryView';\n\nrouter.get('/inv/:brand', (req, res) => {\n    console.log(\"Requested Brand Inventory\");\n    let partNumber = parseInt(req.params.brand);\n    let params = req.query;\n    let lcboInvParams = {\n        \"catalogId\": 10001,\n        \"langId\": -1,\n        \"partNumber\": partNumber,\n        \"storeId\": 10151\n    };\n    axios.get(lcboInvUrl, {\n        params: lcboInvParams,\n        headers: {\n            \"cache-control\": \"no-cache\",\n            \"upgrade-insecure-requests\": \"1\",\n            \"dnt\": \"1\",\n            \"host\": \"www.lcbo.com\"\n        }\n    }).then((resp) => {\n        new LcboParser(resp.data, params, (parsed) => {\n            res.send(parsed);\n        }).parseInventory();\n    }).catch((err) => {\n        res.send(err);\n    })\n});\n\nexport default router;\n"]}